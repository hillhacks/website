"use strict";
/**
 * jsOnlyLightbox 0.5.5
 * Copyright Â© 2014 Felix Hagspiel - http://jslightbox.felixhagspiel.de
 *
 * @license MIT
 * - Free for use in both personal and commercial projects
 */
"use strict";function Lightbox(){function t(){return window.innerHeight||document.documentElement.offsetHeight}function e(){return window.innerWidth||document.documentElement.offsetWidth}function n(t,e,n,o){t.addEventListener?t.addEventListener(e,n,o||!1):t.attachEvent&&t.attachEvent("on"+e,n)}function o(t,e){return t&&e?new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className):void 0}function i(t,e){return t&&e?(t.className=t.className.replace(new RegExp("(?:^|\\s)"+e+"(?!\\S)"),""),t):void 0}function r(t,e){return t&&e?(o(t,e)||(t.className+=" "+e),t):void 0}function a(t){return"undefined"!=typeof t}function p(t,e){if(!t||!a(t))return!1;var n;return t.getAttribute?n=t.getAttribute(e):t.getAttributeNode&&(n=t.getAttributeNode(e).value),a(n)&&""!==n?n:!1}function c(t,e){if(!t||!a(t))return!1;var n;return t.getAttribute?n=t.getAttribute(e):t.getAttributeNode&&(n=t.getAttributeNode(e).value),"string"==typeof n}function l(t){n(t,"click",function(e){s(e),u(e),D=p(t,W+"-group")||!1,P=t,A(t,!1,!1,!1)},!1)}function s(t){t.stopPropagation?t.stopPropagation():t.returnValue=!1}function u(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function m(t){for(var e=[],n=0;n<M.thumbnails.length;n++)p(M.thumbnails[n],W+"-group")===t&&e.push(M.thumbnails[n]);return e}function d(t,e){for(var n=m(e),o=0;o<n.length;o++)if(p(t,"src")===p(n[o],"src")&&p(t,W+"-index")===p(n[o],W+"-index")&&p(t,W)===p(n[o],W))return o}function g(){if(D){var t=new Image,e=new Image,n=d(P,D);n===j.length-1?(t.src=p(j[j.length-1],W)||j[j.length-1].src,e.src=p(j[0].src,W)||j[0].src):0===n?(t.src=p(j[j.length-1],W)||j[j.length-1].src,e.src=p(j[1],W)||j[1].src):(t.src=p(j[n-1],W)||j[n-1].src,e.src=p(j[n+1],W)||j[n+1].src)}}function f(){if(!N){v();var t=function(){if(r(M.box,T+"-loading"),!S&&"number"==typeof M.opt.loadingAnimation){var t=0;y=setInterval(function(){r(X[t],T+"-active"),setTimeout(function(){i(X[t],T+"-active")},M.opt.loadingAnimation),t=t>=X.length?0:t+=1},M.opt.loadingAnimation)}};I=setTimeout(t,500)}}function v(){if(!N&&(i(M.box,T+"-loading"),!S&&"string"!=typeof M.opt.loadingAnimation&&M.opt.loadingAnimation)){clearInterval(y);for(var t=0;t<X.length;t++)i(X[t],T+"-active")}}function h(){if(!$){if($=document.createElement("span"),r($,T+"-next"),M.opt.nextImg){var t=document.createElement("img");t.setAttribute("src",M.opt.nextImg),$.appendChild(t)}else r($,T+"-no-img");n($,"click",function(t){s(t),M.next()},!1),M.box.appendChild($)}if(r($,T+"-active"),!_){if(_=document.createElement("span"),r(_,T+"-prev"),M.opt.prevImg){var e=document.createElement("img");e.setAttribute("src",M.opt.prevImg),_.appendChild(e)}else r(_,T+"-no-img");n(_,"click",function(t){s(t),M.prev()},!1),M.box.appendChild(_)}r(_,T+"-active")}function b(){if(M.opt.responsive&&$&&_){var e=t()/2-$.offsetHeight/2;$.style.top=e+"px",_.style.top=e+"px"}}function x(t){function e(t){return"boolean"==typeof t?t:!0}if(t||(t={}),M.opt={boxId:t.boxId||!1,controls:e(t.controls),dimensions:e(t.dimensions),captions:e(t.captions),prevImg:"string"==typeof t.prevImg?t.prevImg:!1,nextImg:"string"==typeof t.nextImg?t.nextImg:!1,hideCloseBtn:t.hideCloseBtn||!1,closeOnClick:"boolean"==typeof t.closeOnClick?t.closeOnClick:!0,nextOnClick:e(t.nextOnClick),loadingAnimation:void 0===t.loadingAnimation?!0:t.loadingAnimation,animElCount:t.animElCount||4,preload:e(t.preload),carousel:e(t.carousel),animation:"number"==typeof t.animation||t.animation===!1?t.animation:400,responsive:e(t.responsive),maxImgSize:t.maxImgSize||.8,keyControls:e(t.keyControls),hideOverflow:t.hideOverflow||!0,onopen:t.onopen||!1,onclose:t.onclose||!1,onload:t.onload||!1,onresize:t.onresize||!1,onloaderror:t.onloaderror||!1,onimageclick:"function"==typeof t.onimageclick?t.onimageclick:!1},M.opt.boxId){M.box=document.getElementById(M.opt.boxId);var o=M.box.getAttribute("class");o.search(T+" ")<0&&M.box.setAttribute("class",o+" "+T)}else if(!M.box){var a=document.getElementById(z);a||(a=document.createElement("div")),a.setAttribute("id",z),a.setAttribute("class",T),M.box=a,B.appendChild(M.box)}if(M.box.innerHTML=L,N&&r(M.box,T+"-ie8"),M.wrapper=document.getElementById(z+"-contentwrapper"),!M.opt.hideCloseBtn){var p=document.createElement("span");p.setAttribute("id",z+"-close"),p.setAttribute("class",T+"-close"),p.innerHTML="X",M.box.appendChild(p),n(p,"click",function(t){s(t),M.close()},!1)}if(!N&&M.opt.closeOnClick&&n(M.box,"click",function(t){s(t),M.close()},!1),"string"==typeof M.opt.loadingAnimation)w=document.createElement("img"),w.setAttribute("src",M.opt.loadingAnimation),r(w,T+"-loading-animation"),M.box.appendChild(w);else if(M.opt.loadingAnimation){M.opt.loadingAnimation="number"==typeof M.opt.loadingAnimation?M.opt.loadingAnimation:200,w=document.createElement("div"),r(w,T+"-loading-animation");for(var c=0;c<M.opt.animElCount;)X.push(w.appendChild(document.createElement("span"))),c++;M.box.appendChild(w)}M.opt.responsive?(n(window,"resize",function(){M.resize()},!1),r(M.box,T+"-nooverflow")):i(M.box,T+"-nooverflow"),M.opt.keyControls&&n(document,"keydown",function(t){q&&(s(t),39===t.keyCode?M.next():37===t.keyCode?M.prev():27===t.keyCode&&M.close())},!1)}function A(t,e,i,c){if(!t&&!e)return!1;D=e||D||p(t,W+"-group"),D&&(j=m(D),"boolean"!=typeof t||t||(t=j[0])),R.img=new Image,P=t;var l;l="string"==typeof t?t:p(t,W)?p(t,W):p(t,"src"),V=!1,q||("number"==typeof M.opt.animation&&r(R.img,T+"-animate-transition "+T+"-animate-init"),q=!0,M.opt.onopen&&M.opt.onopen(R)),M.opt&&a(M.opt.hideOverflow)&&!M.opt.hideOverflow||B.setAttribute("style","overflow: hidden"),M.box.setAttribute("style","padding-top: 0"),M.wrapper.innerHTML="",M.wrapper.appendChild(R.img),M.opt.animation&&r(M.wrapper,T+"-animate");var u=p(t,W+"-caption");if(u&&M.opt.captions){var d=document.createElement("p");d.setAttribute("class",T+"-caption"),d.innerHTML=u,M.wrapper.appendChild(d)}r(M.box,T+"-active"),N&&r(M.wrapper,T+"-active"),M.opt.controls&&j.length>1&&(h(),b()),R.img.onerror=function(t){M.opt.onloaderror&&(t._happenedWhile=c?c:!1,M.opt.onloaderror(t))},R.img.onload=function(){if(R.originalWidth=this.naturalWidth||this.width,R.originalHeight=this.naturalHeight||this.height,N||S){var t=new Image;t.setAttribute("src",l),R.originalWidth=t.width,R.originalHeight=t.height}var e=setInterval(function(){o(M.box,T+"-active")&&(r(M.wrapper,T+"-wrapper-active"),"number"==typeof M.opt.animation&&r(R.img,T+"-animate-transition"),i&&i(),v(),clearTimeout(I),M.opt.preload&&g(),M.opt.nextOnClick&&(r(R.img,T+"-next-on-click"),n(R.img,"click",function(t){s(t),M.next()},!1)),M.opt.onimageclick&&n(R.img,"click",function(t){s(t),M.opt.onimageclick(R)},!1),M.opt.onload&&M.opt.onload(c),clearInterval(e),M.resize())},10)},R.img.setAttribute("src",l),f()}var w,y,I,C,k,E,H,O="jslghtbx",T=O,z=O,W="data-"+O,M=this,N=!1,S=!1,B=document.getElementsByTagName("body")[0],L='<div class="'+O+'-contentwrapper" id="'+O+'-contentwrapper" ></div>',V=!1,D=!1,P=!1,R={},j=[],q=!1,X=[],$=!1,_=!1;M.opt={},M.box=!1,M.wrapper=!1,M.thumbnails=[],M.load=function(t){navigator.appVersion.indexOf("MSIE 8")>0&&(N=!0),navigator.appVersion.indexOf("MSIE 9")>0&&(S=!0),x(t);for(var e=document.querySelectorAll("["+W+"]"),n=0;n<e.length;n++)c(e[n],W)&&(e[n].setAttribute(W+"-index",n),M.thumbnails.push(e[n]),l(e[n]))},M.open=function(t,e){t&&e&&(e=!1),A(t,e,!1,!1)},M.resize=function(){if(R.img){C=e(),k=t();var n=M.box.offsetWidth,o=M.box.offsetHeight;!V&&R.img&&R.img.offsetWidth&&R.img.offsetHeight&&(V=R.img.offsetWidth/R.img.offsetHeight),Math.floor(n/V)>o?(E=o*V,H=o):(E=n,H=n/V),E=Math.floor(E*M.opt.maxImgSize),H=Math.floor(H*M.opt.maxImgSize),(M.opt.dimensions&&H>R.originalHeight||M.opt.dimensions&&E>R.originalWidth)&&(H=R.originalHeight,E=R.originalWidth),R.img.setAttribute("width",E),R.img.setAttribute("height",H),R.img.setAttribute("style","margin-top:"+(t()-H)/2+"px"),setTimeout(b,200),M.opt.onresize&&M.opt.onresize(R)}},M.next=function(){if(D){var t=d(P,D)+1;if(j[t])P=j[t];else{if(!M.opt.carousel)return;P=j[0]}"number"==typeof M.opt.animation?(i(R.img,T+"-animating-next"),setTimeout(function(){var t=function(){setTimeout(function(){r(R.img,T+"-animating-next")},M.opt.animation/2)};A(P,!1,t,"next")},M.opt.animation/2)):A(P,!1,!1,"next")}},M.prev=function(){if(D){var t=d(P,D)-1;if(j[t])P=j[t];else{if(!M.opt.carousel)return;P=j[j.length-1]}"number"==typeof M.opt.animation?(i(R.img,T+"-animating-prev"),setTimeout(function(){var t=function(){setTimeout(function(){r(R.img,T+"-animating-next")},M.opt.animation/2)};A(P,!1,t,"prev")},M.opt.animation/2)):A(P,!1,!1,"prev")}},M.close=function(){D=!1,P=!1;var t=R;R={},j=[],q=!1,i(M.box,T+"-active"),i(M.wrapper,T+"-wrapper-active"),i($,T+"-active"),i(_,T+"-active"),M.box.setAttribute("style","padding-top: 0px"),v(),N&&M.box.setAttribute("style","display: none"),M.opt&&a(M.opt.hideOverflow)&&!M.opt.hideOverflow||B.setAttribute("style","overflow: auto"),M.opt.onclose&&M.opt.onclose(t)}}